initial_intake_processing:
  description: |
    Read and analyze the initial intake.md file to identify missing mandatory information for ZIM compliance. Check for all required elements across the 8 ZIM mandatory sections:

      - Ausgangssituation und Marktbedarf
      - Technologische Entwicklung
      - Technische Funktionalitäten
      - Risiken
      - Konkurrenzprodukte/Stand der Technik
      - Potential des Antragstellers
      - Fachliche Eignung des Personals
      - Markteinführungskonzept

    If critical information is missing, ask the human for clarification and append all responses to intake.md under a new section '## Ergänzungen (automatisch)' with Q/A bullets and timestamps.

  expected_output: |
    The file intake.md was written/updated with all necessary information for ZIM compliance. If significant gaps remain, open_questions.md was also written. Do not include the file contents in the output.

  agent: intake_curator
  human_input: true
  tools:
    - document_search
    - document_chunk_context
    - workspace_file_read
    - workspace_file_write

extract_zim_compliance_guidelines:
  description: |
    Search internal documents for ZIM compliance guidelines, project description templates, and evaluation criteria.
    Focus on finding actionable rules for each of the 8 mandatory sections, quality criteria, prohibited language patterns, and evidence requirements.
    Extract concrete guidelines about what content must be included, how technical aspects should be presented, and what constitutes sufficient evidence for novelty and feasibility claims.

  expected_output: |
    The file compliance_checklist.md was written with all required content, criteria, and references. Do not include the file contents in the output.

  agent: zim_compliance_extractor
  context:
    - initial_intake_processing
  tools:
    - document_search
    - document_chunk_context
    - workspace_file_read
    - workspace_file_write

formalize_success_metrics:
  description: |
    Transform the informal success descriptions from intake.md into formal, measurable criteria suitable for ZIM evaluation.
    Define specific technical functionalities, measurable parameters (accuracy, latency, throughput, robustness, energy consumption, error rates), detailed measurement methods and test setups, and clear acceptance criteria.
    If essential measurement details are missing (data sources, test environments, reference standards), ask the human for clarification and update intake.md accordingly.

  expected_output: |
    The file intake.md was updated with the section '## Erfolgskriterien (formalisiert)'. Do not include the file contents in the output.

  agent: success_metrics_formalizer
  context:
    - initial_intake_processing
    - extract_zim_compliance_guidelines
  tools:
    - document_search
    - document_chunk_context
    - workspace_file_read
    - workspace_file_write

research_state_of_the_art_and_competition:
  description: |
    Conduct comprehensive web research to identify international state-of-the-art technologies and competitive solutions in the project domain.
    Focus on patents, scientific papers, commercial products, and technical standards.
    Search using technology keywords, use cases, and English/international terminology.
    Prioritize high-quality sources over blog content.
    Document 10-20 authoritative sources with detailed relevance analysis and extract key technical claims that establish the current state-of-the-art.

  expected_output: |
    The file sota_research.md was written with all required research results. Do not include the file contents in the output.

  agent: sota_competition_researcher
  context:
    - formalize_success_metrics
  tools:
    - document_search
    - document_chunk_context
    - workspace_file_read
    - workspace_file_write
    - scrape_website
    - web_search

write_final_zim_project_description:
  description: |
    Create a complete, ZIM-compliant project description following the 8 mandatory sections structure.
    Use technical, objective language avoiding marketing terminology.
    Include a project profile section with company details, project leader, timeline, and technical core.
    Integrate intake information naturally throughout the document and reference state-of-the-art findings using [Sx] notation.
    Mark any missing information with [[FEHLT: ...]] rather than inventing facts.
    Ensure all claims are supported by evidence.

  expected_output: |
    The file project_description_final.md was written with the complete ZIM-compliant project description. Do not include the file contents in the output.

  agent: zim_technical_writer
  context:
    - research_state_of_the_art_and_competition
  tools:
    - workspace_file_read
    - workspace_file_write

quality_assurance_review:
  description: |
    Perform comprehensive quality assurance on the final project description as if evaluating for ZIM funding approval.
    Check completeness of all 8 sections, measurability of goals and parameters, proper evidence support for all state-of-the-art claims using [Sx] references, absence of marketing language, and internal consistency across timeline, milestones, work packages, and objectives.
    If critical issues are found, correct them directly or create focused questions for human input.
    Update both the project description and create a detailed review report.

  expected_output: |
    The files review_report.md and project_description_final.md were written/updated with the review findings and corrections. Do not include the file contents in the output.

  agent: red_team_reviewer
  human_input: true
  context:
    - write_final_zim_project_description
  tools:
    - document_search
    - document_chunk_context
    - workspace_file_read
    - workspace_file_write
